# Number-BATTLE-1

## 概要

Number-BATTLE-1は、数字を使った戦略的なターン制バトルゲームです。プレイヤーはCPUと対戦し、左右の手を使って攻撃と分割を行います。シンプルなルールながら、深い戦略性を持つゲームです。

## ゲームルール

### 基本概念
- 各プレイヤー（あなたとCPU）は**左手**と**右手**を持ちます。
- 各手の初期値は**1**です。
- 手の値は**1〜4**の範囲で有効です。**0**または**5**になるとその手は「死んだ」状態になります。
- 両手が死んだプレイヤーが敗北します。

### アクション
各ターンで以下のアクションを選択できます：

#### 1. 攻撃 (Attack)
- 自分の生きている手を使って、相手の生きている手を攻撃します。
- 攻撃の結果：相手の手の値 = (自分の手の値 + 相手の手の値) を1〜5の範囲に収めた値
- 例：自分の左手(2) で相手の右手(3) を攻撃 → 相手の右手 = (2+3)=5 → 死ぬ

#### 2. 分割 (Split)
- 自分の両手の合計値を、左右の手の新しい値に再分配します。
- 新しい値は1〜4の範囲で、現在の値と同じ組み合わせは選択できません。
- 片手が死んでいる場合、その手は分割の対象外となり、生きている手の値のみを合計して再分配します。
- 例：左手(2)、右手(3) の合計5 → 左手(1)、右手(4) に分割
- 片手が死んでいる例：左手(0)、右手(4) の合計4 → 左手(1)、右手(3) または 左手(2)、右手(2) に分割
- 新ルール: 分割で0を生成することを許可します（0は死の状態）。たとえば、現在が `2,2` の場合、`4,0` に分割することができます。これはプレイヤー・CPUともに利用可能な戦術です。
- **禁止パターン例**:
  - 現在の左手(2)、右手(3) の場合：(2,3) または (3,2) は選択不可
  - 現在の左手(1)、右手(4) の場合：(1,4) または (4,1) は選択不可
  - 値として0または5を使用することはできません（例: (0,4) や (5,1) は無効）

### 勝利条件
- 相手の両手が死んだ状態（0または5）になったら勝利
- 自分の両手が死んだら敗北

### 計算ルール（常に適用）
- 値の計算ルールは常に適用されます。攻撃やその他の操作で得られる合計値に対して必ず変換が行われます。
- 合計値は1〜5の範囲にラップ（循環）されます。具体例: 6→1, 7→2, 8→3, 9→4, 10→5, 11→1, ...
- 重要: 値が**ぴったり5**になった場合、その手は「死んだ」状態になります（5 は死）。0 も死の値として扱いますが、通常の加算・ラップ計算では「5」が死に相当します。
 - 重要な更新: 分割によって0を直接作ること（例: 4,0）は許可されます。分割結果で0になった手は即座に死んだ状態になります。
   - 例：2 + 3 = 5 → その手は5になり死亡
   - 例：4 + 2 = 6 → 6→1（生存）
   - 例：4 + 6 = 10 → 10→5（死亡）
- 分割は自分のターンでのみ可能で、攻撃とは別の戦略手段です。

## 操作方法

1. **ゲーム開始**
   - ページを開くとスタート画面が表示されます。
   - CPUの難易度を選択（最弱/普通/強い/最強）。

2. **ターン進行**
   - あなたのターン：手（左手/右手）をクリックして選択。
   - 攻撃：相手の手をクリックして攻撃を実行。
   - 分割：分割ボタンをクリックしてモーダルを開き、新しい値を選択。

3. **ヒント機能**
   - 「ヒント」ボタンをクリックすると、AIが最適な手を提案します。
   - 提案された手がハイライト表示されます。

4. **バトルレビュー**
   - ゲーム終了後、バトルログを確認できます。
   - 各ターンの詳細な状態変化を見ることができます。

## CPU難易度

- **最弱 (Weakest)**: ランダムな行動
- **普通 (Normal)**: 基本的な戦略
- **強い (Hard)**: 高度な戦略
- **最強 (Strong)**: 最適なプレイ

## 技術仕様

- **言語**: HTML, CSS, JavaScript (ES6 Modules)
- **フレームワーク**: なし（Vanilla JS）
- **AI**: ミニマックスアルゴリズムを使用したCPU思考
- **アニメーション**: CSSアニメーションとJavaScript
- **ストレージ**: なし（ブラウザ内のみ）

## ファイル構造

```
Number-BATTLE-1/
├── index.html          # メインHTMLファイル
├── css/
│   └── number-battle.css  # スタイルシート
├── js/
│   ├── game.js         # メインゲームロジック
│   ├── ai.js           # AIエンジン
│   ├── animations.js   # アニメーション処理
│   ├── constants.js    # 定数定義
│   ├── main.js         # エントリーポイント
│   └── utils.js        # ユーティリティ関数
└── README.md           # このファイル
```

## 遊び方Tips

- **攻撃のタイミング**: 相手の手を5にすると死なせることができます。
- **分割の戦略**: 手が強くなりすぎないよう調整したり、弱い手を強化したり。
- **ヒント活用**: 初心者はヒントを積極的に使って学習しましょう。
- **CPU分析**: 強いCPUは分割を上手く使います。観察して学びましょう。

## 開発情報

このゲームは教育目的で作成されており、戦略ゲームのアルゴリズム学習に適しています。AIの実装はミニマックス法をベースにしています。

---

**Enjoy the Number Battle!** 🎮