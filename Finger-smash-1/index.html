<!doctype html>
<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>指スマ (ターン制)</title>
		<link
			href="https://fonts.googleapis.com/css2?family=Mochiy+Pop+One&display=swap"
			rel="stylesheet"
		/>
		<style>
			@import "tailwindcss";

			body {
				font-family: "Mochiy Pop One", sans-serif;
				touch-action: manipulation;
			}
			.hand-container {
				transition: visibility 0.2s;
			}
			.hand-svg {
				width: 100px;
				height: 100px;
				stroke: white;
				stroke-width: 4;
				stroke-linecap: round;
				stroke-linejoin: round;
				fill: none;
				transition: transform 0.2s ease-in-out;
			}
			.hand-svg .thumb {
				display: none; /* Initially hidden */
			}
			.hand-svg.thumb-up .thumb {
				display: block;
			}
			.control-button {
				transition: all 0.15s ease-out;
			}
			.control-button.selected {
				transform: translateY(-4px) scale(1.05);
				box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
				background-color: #f59e0b; /* amber-500 */
			}
			.shake {
				animation: shake 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
			}
			@keyframes shake {
				10%,
				90% {
					transform: translate3d(-1px, 0, 0) rotate(-2deg);
				}
				20%,
				80% {
					transform: translate3d(2px, 0, 0) rotate(2deg);
				}
				30%,
				50%,
				70% {
					transform: translate3d(-4px, 0, 0) rotate(-4deg);
				}
				40%,
				60% {
					transform: translate3d(4px, 0, 0) rotate(4deg);
				}
			}
			.result-reveal {
				animation: pop-in 0.5s ease-out forwards;
			}
			@keyframes pop-in {
				0% {
					transform: scale(0.5);
					opacity: 0;
				}
				100% {
					transform: scale(1);
					opacity: 1;
				}
			}
		</style>
	</head>
	<body
		class="bg-gray-800 text-white flex items-center justify-center min-h-screen"
	>
		<div id="game-container" class="w-full max-w-lg mx-auto p-4 text-center">
			<!-- スコアボード -->
			<div
				class="flex justify-around items-center bg-gray-900 p-2 rounded-lg mb-4"
			>
				<div>
					<span class="text-xl">あなた</span>
					<div id="player-score" class="text-4xl font-bold text-cyan-400">
						0
					</div>
					<div class="text-sm text-gray-400">勝ち抜け</div>
				</div>
				<div class="text-2xl text-gray-400">- VS -</div>
				<div>
					<span class="text-xl">CPU</span>
					<div id="cpu-score" class="text-4xl font-bold text-red-400">0</div>
					<div class="text-sm text-gray-400">勝ち抜け</div>
				</div>
			</div>

			<!-- メインゲームエリア -->
			<div class="space-y-4">
				<!-- CPUエリア -->
				<div id="cpu-area" class="bg-red-900/50 p-4 rounded-lg min-h-[220px]">
					<h2 class="text-2xl mb-2">CPU</h2>
					<div class="flex justify-center items-center space-x-4">
						<div
							id="cpu-hand-left"
							class="hand-container transform -scale-x-100"
						>
							<!-- SVG Hand Placeholder -->
						</div>
						<div id="cpu-hand-right" class="hand-container">
							<!-- SVG Hand Placeholder -->
						</div>
					</div>
					<div id="cpu-info" class="mt-2 h-10">
						<p id="cpu-call-text" class="text-xl opacity-0">
							コール: <span class="text-yellow-300">?</span>
						</p>
					</div>
				</div>

				<!-- 結果表示エリア -->
				<div
					id="result-area"
					class="h-20 flex flex-col items-center justify-center"
				>
					<p id="turn-indicator" class="text-xl mb-2"></p>
					<p id="chant-text" class="text-2xl md:text-3xl text-yellow-300">
						準備はいい？
					</p>
				</div>

				<!-- プレイヤーエリア -->
				<div
					id="player-area"
					class="bg-cyan-900/50 p-4 rounded-lg min-h-[220px]"
				>
					<div class="flex justify-center items-center space-x-4">
						<div
							id="player-hand-left"
							class="hand-container transform -scale-x-100"
						>
							<!-- SVG Hand Placeholder -->
						</div>
						<div id="player-hand-right" class="hand-container">
							<!-- SVG Hand Placeholder -->
						</div>
					</div>
					<h2 class="text-2xl mt-2">あなた</h2>
				</div>
			</div>

			<!-- 操作パネル -->
			<div id="controls-area" class="mt-4 space-y-4">
				<div id="thumbs-controls">
					<p class="mb-2 text-lg">あげる指の数</p>
					<div class="flex justify-center space-x-2">
						<button
							data-type="thumbs"
							data-value="0"
							class="control-button thumbs-btn bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg"
						>
							0本
						</button>
						<button
							data-type="thumbs"
							data-value="1"
							class="control-button thumbs-btn bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg"
						>
							1本
						</button>
						<button
							data-type="thumbs"
							data-value="2"
							class="control-button thumbs-btn bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg"
						>
							2本
						</button>
					</div>
				</div>
				<div id="call-controls">
					<p class="mb-2 text-lg">合計数のコール</p>
					<div class="flex justify-center space-x-2">
						<button
							data-type="call"
							data-value="0"
							class="control-button call-btn bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-5 rounded-lg"
						>
							0
						</button>
						<button
							data-type="call"
							data-value="1"
							class="control-button call-btn bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-5 rounded-lg"
						>
							1
						</button>
						<button
							data-type="call"
							data-value="2"
							class="control-button call-btn bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-5 rounded-lg"
						>
							2
						</button>
						<button
							data-type="call"
							data-value="3"
							class="control-button call-btn bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-5 rounded-lg"
						>
							3
						</button>
						<button
							data-type="call"
							data-value="4"
							class="control-button call-btn bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-5 rounded-lg"
						>
							4
						</button>
					</div>
				</div>
				<button
					id="play-button"
					class="w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-500 disabled:cursor-not-allowed text-white font-bold py-4 rounded-lg text-2xl mt-4"
				>
					いっせーのーせ！
				</button>
			</div>

			<!-- ゲームオーバー画面 -->
			<div
				id="game-over-screen"
				class="hidden fixed inset-0 bg-black/70 flex flex-col items-center justify-center"
			>
				<h2 id="game-over-text" class="text-5xl text-yellow-300 mb-8"></h2>
				<button
					id="restart-button"
					class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-8 rounded-lg text-2xl"
				>
					もう一度遊ぶ
				</button>
			</div>
		</div>
		<script type="module" src="./main.ts"></script>
	</body>
</html>
