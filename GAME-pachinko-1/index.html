<!DOCTYPE html>
<html lang="ja">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>パチンコゲーム</title>
	<link rel="stylesheet" href="style.css">
	<!-- Embed slot styles so injected slot markup is styled correctly -->
	<link rel="stylesheet" href="../GAME-SLOT-1/style.css">

</head>

<body>
	<!-- Portal Back Button -->
	<div class="topbar">
		<a class="back-to-portal" href="../index.html" aria-label="ポータルに戻る">← ポータルに戻る</a>
	</div>
	<!-- ゲームタイトル -->
	<h1></h1>

	<!-- Matter.jsのレンダリングが行われるコンテナ -->
	<div id="game-container"></div>

	<!-- ボールの発射方向を示す矢印 -->
	<div id="launch-arrow" aria-hidden="true"></div>

	<!-- ゲームの操作パネル -->
	<div class="controls">
		<!-- 発射強度を調整するスライダー -->
		<input id="speed-slider" type="range" min="0" max="100" step="1" value="50">
		<div class="slider-info">
			<label>強さ (0〜100): <span id="speed-val">50</span></label>
		</div>

		<!-- Embedded slot area: 開発者パネルより上に配置するため、.controls 内に置く -->
		<div id="embedded-slot-area">
			<!-- Slot HTML will be injected here when adapter initializes -->
			<div id="embedded-slot-container"></div>
		</div>
	</div>

	<!-- 物理エンジンライブラリ -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
	<!-- 凹多角形の分解ライブラリ（Matter.jsのBodies.fromVerticesで必要） -->
	<script src="https://cdn.jsdelivr.net/npm/poly-decomp@0.3.0/build/decomp.min.js"></script>

	<!-- poly-decompをMatter.jsに登録 -->
	<script>
		(function () {
			var ok = false;
			// ライブラリが正しく読み込まれているか確認
			if (window.decomp && window.Matter && window.Matter.Common) {
				// 凹多角形を扱えるように設定
				window.Matter.Common.setDecomp(window.decomp);
				ok = true;
			}
			if (!ok) {
				console.warn('[topPlate] poly-decomp の登録に失敗しました。複雑な頂点形状が凸包化される可能性があります。');
			}
		})();
	</script>

	<!-- ゲームスクリプト（読み込み順序が重要） -->
	<script src="js/config.js"></script> <!-- 設定ファイル -->
	<script src="js/objects.js"></script> <!-- ゲームオブジェクト定義 -->
	<script src="js/dev-tools.js"></script> <!-- 開発用ツール -->
	<script src="js/main.js"></script> <!-- メインロジック -->
	<!-- Slot adapter (optional embedding of GAME-SLOT-1) -->
	<script type="module" src="../GAME-SLOT-1/script.js"></script>
	<script src="js/slot-adapter.js"></script>
</body>

</html>
